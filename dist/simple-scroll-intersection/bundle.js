(()=>{"use strict";function t(){var t=!1;try{var e={get passive(){return t=!0,!0}};window.addEventListener("test",null,e)}catch(t){}return!!t&&{passive:!0}}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var c=function(){function t(){o(this,t)}return i(t,null,[{key:"top",get:function(){return"top"}},{key:"bottom",get:function(){return"bottom"}},{key:"left",get:function(){return"left"}},{key:"right",get:function(){return"right"}}]),t}(),s=function(){function r(i){o(this,r);var c=function(){return null},s={getBoundingClientRect:c};this.opts=function(t){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?e(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({notify:c},i),this.notify=setTimeout.bind(null,this.opts.notify,0),this.opts.notify===c&&console.warn("notify option must be supplied to get results"),this.scrollSource=document.querySelector(this.opts.scrollSelector),this.scrollSource||console.warn('failed to identify a scroll source with "'.concat(this.opts.scrollSelector,'"')),this.targetRectFn=r.optionRectFn(this.opts.target),this.targetRectFn||console.warn('failed to compute target rect on "'.concat(this.opts.target,'"')),this.moving=document.querySelector(this.opts.movingSelector)||s,this.moving.getBoundingClientRect()||console.warn('failed to compute moving rect on "'.concat(this.opts.movingSelector,'"')),this.tickScroll=!1,this.intersected=this.computeIntersection().intersection,this.onScroll=this.onScroll.bind(this),this.passiveEventOption=t()}return i(r,[{key:"computeIntersection",value:function(){var t={},e=this.targetRectFn(),n=this.moving.getBoundingClientRect();if(!n||!e)return{intersection:!1,from:t};var o=Math.max(e.top,n.top),r=Math.min(e.bottom,n.bottom),i=Math.max(e.left,n.left),s=Math.min(e.right,n.right)-i>=0&&r-o>=0;return t[c.top]=n.bottom>=e.top&&n.top<e.top,t[c.bottom]=n.top<=e.bottom&&n.bottom>e.bottom,t[c.left]=n.right>=e.left&&n.left<e.left,t[c.right]=n.left<=e.right&&n.right>e.right,{intersection:s,from:t}}},{key:"onScroll",value:function(){var t=this;this.tickScroll||(this.tickScroll=!0,window.requestAnimationFrame((function(){t.updateScroll(),t.tickScroll=!1})))}},{key:"updateScroll",value:function(){var t=this.computeIntersection();this.intersected&&!t.intersection?(this.intersected=!1,this.notify(t)):!this.intersected&&t.intersection&&(this.intersected=!0,this.notify(t))}},{key:"start",value:function(){this.scrollSource.addEventListener("scroll",this.onScroll,this.passiveEventOption)}},{key:"stop",value:function(){this.scrollSource.removeEventListener("scroll",this.onScroll)}}],[{key:"optionRectFn",value:function(t){var e;if("function"==typeof t)e=t;else{var n=document.querySelector(t);n&&(e=n.getBoundingClientRect.bind(n))}return e}}]),r}();function l(t){var e=new s(t);return{getUpdateScroll:function(){return e.updateScroll.bind(e)},start:e.start.bind(e),stop:e.stop.bind(e)}}function a(t,e){var n=Object.keys(e.from).filter((function(t){return e.from[t]}));t.classList.toggle("intersected"),e.intersection?(this.directionClass="".concat(n,"-x"),t.classList.add(this.directionClass)):t.classList.remove(this.directionClass)}window.addEventListener("DOMContentLoaded",(function(){var t=!1,e=[],n=[".top",".right",".bottom",".left"].reduce((function(t,n){var o=t,r=document.querySelector(n);return e.push(l({scrollSelector:"body",movingSelector:n,target:".target",notify:a.bind({},r)}).getUpdateScroll()),o[n.substring(1)]=r,o}),{}),o=n.top,r=n.right,i=n.bottom,c=n.left;window.addEventListener("scroll",(function(){t||(t=!0,requestAnimationFrame((function(){var n;n=window.scrollY,o.style.transform="translate3d(-50%, ".concat(1.5*n,"px, 0)"),r.style.transform="translate3d(".concat(-1.5*n,"px, -50%, 0)"),i.style.transform="translate3d(-50%, ".concat(-n,"px, 0)"),c.style.transform="translate3d(".concat(n,"px, -50%, 0)"),e.forEach((function(t){return t()})),t=!1})))}),{passive:!0})}))})();