(()=>{"use strict";function t(){var t=!1;try{var e={get passive(){return t=!0,!0}};window.addEventListener("test",null,e)}catch(t){console.error(t)}return!!t&&{passive:!0}}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function n(t,e,o){return(e=s(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function l(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,o||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==e(o)?o:o+""}var a=function(){return l((function t(){i(this,t)}),null,[{key:"START_COLLAPSE",get:function(){return"start_collapse"}},{key:"END_COLLAPSE",get:function(){return"end_collapse"}},{key:"START_EXPAND",get:function(){return"start_expand"}},{key:"END_EXPAND",get:function(){return"end_expand"}}])}(),c=function(){function e(r){i(this,e);var l=function(){};this._opts=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({resizeWait:350,props:["opacity","height","marginTop","marginBottom","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],notify:l},r),this._scrollSource=document.querySelector(r.scrollSelector),this._top={el:document.querySelector(r.topCollapseSelector),height:0},this._bot={el:document.querySelector(r.bottomCollapseSelector)},this._props=this._opts.props,this._notify=this._opts.notify===l?l:setTimeout.bind(null,this._opts.notify,0),this._lastY=0,this._tickScroll=!1,this._tickResize=!1,this._collapseStart=!1,this._endExpandInterval=void 0,this._onScroll=this._onScroll.bind(this),this._onResize=this._onResize.bind(this),this._endExpand=this._endExpand.bind(this),this._passiveEventOption=t(),window.addEventListener("resize",this._onResize,this._passiveEventOption)}return l(e,[{key:"_onResize",value:function(){var t=this;this._tickResize||(this._tickResize=!0,setTimeout((function(){window.requestAnimationFrame((function(){t._updateSize(),t._tickResize=!1}))}),this._opts.resizeWait))}},{key:"_onScroll",value:function(){var t=this,e=this._scrollSource.scrollTop,o=e<this._lastY,n=0===this._lastY;this._lastY=e,this._tickScroll||(this._tickScroll=!0,window.requestAnimationFrame((function(){t._updateScroll(n,o),t._tickScroll=!1})))}},{key:"_updateSize",value:function(){var t=this,o=this._top.el.getBoundingClientRect().height;if(!(o<this._top.height)){var n=window.getComputedStyle(this._top.el);this._top.height=o,this._props.forEach((function(o){"height"!==o&&(t._top[o]=e.getStyleNumber(n,e.toStyleHyphen(o)))}));var i=window.getComputedStyle(this._bot.el);this._bot.height=this._bot.el.getBoundingClientRect().height,this._props.forEach((function(o){"height"!==o&&(t._bot[o]=e.getStyleNumber(i,e.toStyleHyphen(o)))}));var r=this._scrollSource.getBoundingClientRect().height,l=this._scrollSource.scrollHeight-r,s=Math.abs(l)<1,a=this._props.reduce((function(e,o){return"opacity"===o?e:e+t._top[o]}),0),c=this._props.reduce((function(e,o){return"opacity"===o?e:e+t._bot[o]}),0);this._scrollSrcHeight=!s&&l<=r+a+c?l-a-c:r,this._scrollSource.removeEventListener("scroll",this._onScroll),this._scrollSrcHeight>0?(this._scrollSource.addEventListener("scroll",this._onScroll,this._passiveEventOption),this._scrollSource.style.willChange="scroll-position",this._top.el.style.willChange=this._props.map((function(t){return e.toStyleHyphen(t)})).join(","),this._bot.el.style.willChange=this._props.map((function(t){return e.toStyleHyphen(t)})).join(","),this._lastY>0&&this._onScroll()):(this._scrollSource.style.willChange="auto",this._top.el.style.willChange="auto",this._bot.el.style.willChange="auto")}}},{key:"_updateScroll",value:function(t,o){var n=e.collapse(this._top,this._lastY/this._scrollSrcHeight,o,this._props);e.collapse(this._bot,this._lastY/this._scrollSrcHeight,o,this._props),t?(this._notify(a.START_COLLAPSE),this._collapseStart=!0,this._endExpandInterval&&(clearInterval(this._endExpandInterval),delete this._endExpandInterval)):!n&&this._collapseStart?(this._notify(a.END_COLLAPSE),this._collapseStart=!1,this._endExpandInterval&&(clearInterval(this._endExpandInterval),delete this._endExpandInterval)):!this._collapseStart&&o&&n&&(this._notify(a.START_EXPAND),this._collapseStart=!0,this._endExpandInterval=setInterval(this._endExpand,200))}},{key:"_endExpand",value:function(){this._collapseStart?0===this._scrollSource.scrollTop&&(this._notify(a.END_EXPAND),clearInterval(this._endExpandInterval),delete this._endExpandInterval):(clearInterval(this._endExpandInterval),delete this._endExpandInterval)}},{key:"start",value:function(){this._updateSize()}}],[{key:"getNumber",value:function(t){return parseFloat(t.replace(/[^.+\-\d]+/,""))}},{key:"getStyleNumber",value:function(t){for(var o=arguments.length,n=new Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];return n.reduce((function(o,n){return o+e.getNumber(t.getPropertyValue(n)||"0")}),0)}},{key:"toStyleHyphen",value:function(t){return t.replace(/[A-Z]/g,(function(t,e){return(e?"-":"")+t.toLowerCase()}))}},{key:"collapse",value:function(t,e,o,n){var i=!1,r=t.el.style;if("0px"!==r.height||o){var l={},s={opacity:.15},a={opacity:" "},c={opacity:1},h={opacity:function(t){return t*(o?.5*t<.15?0:1.085:.5)}};n.forEach((function(o){var n=s[o]||1,i=(h[o]||function(t){return t})(t[o]-t[o]*e).toFixed(2),u=c[o]||i,p=a[o]||"px";l[o]=i,r[o]="".concat(i<n?0:Math.min(i,u)).concat(p)})),i=l.height>.5}return i}}])}();function h(t){new c(t).start()}document.addEventListener("DOMContentLoaded",(function(){h({topCollapseSelector:".logo",bottomCollapseSelector:".collapsible-footer",scrollSelector:".text-container",props:["opacity","height","marginTop","marginBottom"],notify:function(t){switch(t){case a.START_COLLAPSE:console.log("@@@ collapse starting");break;case a.END_COLLAPSE:console.log("@@@ collapse ended");break;case a.START_EXPAND:console.log("@@@ expand starting");break;case a.END_EXPAND:console.log("@@@ expand ended");break;default:console.log("@@@ unknown event")}}})}),{once:!0})})();